<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø±Ø§Ø¯ÙŠÙˆ ØªÙØ§Ø¹Ù„ÙŠ - Ù…Ù† Ø£ÙŠÙ† ØªØ¨Ø« Ø§Ù„Ù…Ø­Ø·Ø§Øª Ø§Ù„Ø¥Ø°Ø§Ø¹ÙŠØ©</title>

  <script src="https://cdn.tailwindcss.com/3.4.17"></script>

  <!-- Ø¯Ø¹Ù… ØªØ´ØºÙŠÙ„ HLS (m3u8) Ø¹Ù„Ù‰ ÙƒØ±ÙˆÙ…/ÙØ§ÙŠØ±ÙÙˆÙƒØ³ØŒ ÙˆØ³ÙØ§Ø±ÙŠ ØºØ§Ù„Ø¨Ù‹Ø§ ÙŠØ¯Ø¹Ù…Ù‡ Ø¨Ø¯ÙˆÙ†Ù‡Ø§ -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.15/dist/hls.min.js"></script>

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    * { font-family: 'Cairo', sans-serif; }

    .radio-body{
      background: linear-gradient(145deg, #8B4513 0%, #5D3A1A 50%, #3D2512 100%);
      border: 8px solid #2D1810;
      box-shadow: inset 0 2px 10px rgba(255,255,255,0.1), 0 20px 40px rgba(0,0,0,0.5), 0 0 0 4px #4A3020;
    }
    .dial-track{ background: linear-gradient(to bottom, #1a1a1a, #333, #1a1a1a); border: 3px solid #444; }
    .dial-knob{ background: linear-gradient(145deg, #FFD700, #B8860B, #8B6914); box-shadow: 0 4px 15px rgba(0,0,0,0.5); cursor: grab; }
    .dial-knob:active{ cursor: grabbing; }

    .frequency-display{
      background: linear-gradient(to bottom, #0a1628, #1a3050);
      border: 4px solid #2D1810;
      box-shadow: inset 0 0 20px rgba(0,255,150,0.1);
    }

    .signal-led{ width: 12px; height: 12px; border-radius: 50%; transition: all 0.3s ease; }
    .led-off{ background:#333; box-shadow:none; }
    .led-red{ background:#ff4444; box-shadow:0 0 10px #ff4444, 0 0 20px #ff4444; }
    .led-yellow{ background:#ffaa00; box-shadow:0 0 10px #ffaa00, 0 0 20px #ffaa00; }
    .led-green{ background:#00ff88; box-shadow:0 0 10px #00ff88, 0 0 20px #00ff88; }

    .noise-overlay{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:0;
      background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.3) 2px, rgba(0,0,0,0.3) 4px);
      animation: noise 0.1s infinite;
    }
    @keyframes noise { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-2px)} }
    .static-text{ animation: staticFlicker 0.1s infinite; }
    @keyframes staticFlicker { 0%,100%{opacity:1} 50%{opacity:.8} }

    .speaker-grille{
      background: repeating-linear-gradient(90deg, #2D1810, #2D1810 3px, #1a0f08 3px, #1a0f08 6px);
    }
    .golden-accent{ background: linear-gradient(90deg, #8B6914, #FFD700, #8B6914); }

    input:focus, select:focus{ outline:none; border-color:#8B4513; box-shadow:0 0 0 3px rgba(139,69,19,0.2); }
  </style>
</head>

<body class="h-full bg-gradient-to-br from-amber-900 via-amber-800 to-stone-900 overflow-auto">
  <div class="w-full min-h-full p-4 md:p-8">

    <div class="text-center mb-8">
      <h1 class="text-3xl md:text-4xl font-bold text-amber-100 mb-2 drop-shadow-lg">ğŸ™ï¸ Ù…Ù† Ø£ÙŠÙ† ØªØ¨Ø« Ø§Ù„Ù…Ø­Ø·Ø§Øª Ø§Ù„Ø¥Ø°Ø§Ø¹ÙŠØ©ØŸ</h1>
      <p class="text-amber-200/80 text-lg">ØªØ¬Ø±Ø¨Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ø§Ø³ØªÙƒØ´Ø§Ù Ù…ÙˆØ¬Ø§Øª Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ</p>
    </div>

    <div class="max-w-4xl mx-auto">
      <div class="radio-body rounded-3xl p-6 md:p-8">
        <div class="golden-accent h-2 rounded-full mb-6"></div>

        <div class="frequency-display rounded-xl p-4 mb-6">
          <div class="relative">
            <div id="noise-overlay" class="noise-overlay rounded-lg"></div>

            <div class="text-center mb-4">
              <span class="text-green-400/60 text-sm">AM</span>
              <div id="current-frequency" class="text-5xl md:text-6xl font-bold text-green-400 tracking-wider"
                   style="text-shadow: 0 0 20px rgba(0,255,150,0.5);">
                540 <span class="text-2xl">KHz</span>
              </div>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
              <div class="bg-black/30 rounded-lg p-3">
                <div class="text-green-400/60 text-xs mb-1">Ø§Ø³Ù… Ø§Ù„Ø¥Ø°Ø§Ø¹Ø©</div>
                <div id="station-name" class="text-green-400 font-bold text-sm md:text-base">---</div>
              </div>
              <div class="bg-black/30 rounded-lg p-3">
                <div class="text-green-400/60 text-xs mb-1">Ù…ÙƒØ§Ù† Ø§Ù„Ø¨Ø«</div>
                <div id="broadcast-location" class="text-green-400 font-bold text-sm md:text-base">---</div>
              </div>
              <div class="bg-black/30 rounded-lg p-3">
                <div class="text-green-400/60 text-xs mb-1">Ø§Ù„ØªØ±Ø¯Ø¯</div>
                <div id="frequency-display" class="text-green-400 font-bold text-sm md:text-base">--- KHz</div>
              </div>
              <div class="bg-black/30 rounded-lg p-3">
                <div class="text-green-400/60 text-xs mb-1">Ø§Ù„Ø¨Ø¹Ø¯</div>
                <div id="distance-display" class="text-green-400 font-bold text-sm md:text-base">--- Km</div>
              </div>
            </div>

            <!-- Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØµÙˆØª -->
            <div class="mt-4 bg-black/20 rounded-xl p-4">
              <div class="flex flex-col md:flex-row gap-3 items-center justify-between">
                <div class="text-amber-200 font-bold">ğŸ”Š Ø§Ù„ØµÙˆØª</div>

                <div class="flex gap-2 items-center">
                  <button id="play-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold px-4 py-2 rounded-lg shadow">
                    â–¶ï¸ ØªØ´ØºÙŠÙ„
                  </button>
                  <button id="pause-btn" class="bg-stone-600 hover:bg-stone-700 text-white font-bold px-4 py-2 rounded-lg shadow">
                    â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù
                  </button>
                </div>

                <div class="flex items-center gap-2 w-full md:w-72">
                  <span class="text-amber-200/80 text-sm">Ø§Ù„ØµÙˆØª</span>
                  <input id="vol" type="range" min="0" max="1" step="0.01" value="0.9" class="w-full accent-amber-500">
                </div>

                <div id="audio-state" class="text-amber-200/80 text-sm text-center md:text-left">
                  Ø§Ø®ØªØ§Ø±ÙŠ Ù…Ø­Ø·Ø© Ø«Ù… Ø§Ø¶ØºØ·ÙŠ ØªØ´ØºÙŠÙ„
                </div>
              </div>

              <audio id="station-audio" playsinline></audio>
            </div>

          </div>
        </div>

        <!-- Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„ØªØ±Ø¯Ø¯ -->
        <div class="mb-6">
          <div class="flex justify-between text-amber-200/80 text-sm mb-2 px-2">
            <span>540</span><span>700</span><span>900</span><span>1100</span><span>1300</span><span>1500</span><span>1600</span>
          </div>

          <div class="dial-track rounded-full h-8 relative">
            <div class="absolute top-0 h-full flex items-center" style="left: calc((621 - 540) / (1600 - 540) * 100%);">
              <div class="w-1 h-4 bg-red-500 rounded"></div>
            </div>
            <div class="absolute top-0 h-full flex items-center" style="left: calc((1161 - 540) / (1600 - 540) * 100%);">
              <div class="w-1 h-4 bg-yellow-500 rounded"></div>
            </div>

            <div id="dial-knob" class="dial-knob absolute top-1/2 -translate-y-1/2 w-8 h-8 rounded-full flex items-center justify-center" style="left: 0%;">
              <div class="w-1 h-4 bg-amber-900 rounded"></div>
            </div>
          </div>

          <div class="flex justify-between mt-2 px-2">
            <span class="text-xs text-red-400">â— Ø§Ù„Ø±ÙŠØ§Ø¶ (621)</span>
            <span class="text-xs text-yellow-400">â— Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© (1161)</span>
          </div>
        </div>

        <!-- Ù‚ÙˆØ© Ø§Ù„Ø¥Ø´Ø§Ø±Ø© -->
        <div class="bg-black/20 rounded-xl p-4 mb-6">
          <div class="text-amber-200 font-bold mb-3 text-center">ğŸ“¡ Ù‚ÙˆØ© Ø§Ù„Ø¥Ø´Ø§Ø±Ø©</div>
          <div class="flex justify-center items-center gap-6">
            <div class="flex flex-col items-center">
              <div id="led-weak" class="signal-led led-off mb-2"></div><span class="text-amber-200/60 text-xs">Ø¶Ø¹ÙŠÙØ©</span>
            </div>
            <div class="flex flex-col items-center">
              <div id="led-medium" class="signal-led led-off mb-2"></div><span class="text-amber-200/60 text-xs">Ù…ØªÙˆØ³Ø·Ø©</span>
            </div>
            <div class="flex flex-col items-center">
              <div id="led-strong" class="signal-led led-off mb-2"></div><span class="text-amber-200/60 text-xs">Ù‚ÙˆÙŠØ©</span>
            </div>
          </div>
          <div id="signal-status" class="text-center mt-3 text-amber-100 font-bold">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø§Ø±Ø©</div>
        </div>

        <div class="speaker-grille h-16 rounded-xl"></div>
        <div class="golden-accent h-2 rounded-full mt-6"></div>
      </div>
    </div>

    <footer class="text-center mt-8 pb-4">
      <div class="inline-block bg-amber-900/50 backdrop-blur rounded-xl px-6 py-3">
        <p class="text-amber-200 font-bold">ØªØµÙ…ÙŠÙ… Ù†ÙˆÙ Ø®Ø¨ØªÙŠ - Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¨Ø¨ÙŠØ´Ø© Ù…Ø³Ø§Ø±Ø§Øª</p>
      </div>
    </footer>

  </div>

  <script>
    // ====== Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¨Ø« ======
    // Ø§Ù„Ø±ÙŠØ§Ø¶: m3u8 (HLS)
    // Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©: Ù‚Ø¯ Ù„Ø§ ÙŠÙƒÙˆÙ† Ø±Ø§Ø¨Ø· ØµÙˆØª Ù…Ø¨Ø§Ø´Ø± - Ø¥Ù† ÙØ´Ù„ØŒ Ø§Ø³ØªØ¨Ø¯Ù„ÙŠÙ‡ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¨Ø±Ø§Ø¨Ø· mp3/aac/m3u8 Ù…Ø¨Ø§Ø´Ø±
    const stations = {
      riyadh: {
        name: 'Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ø±ÙŠØ§Ø¶',
        location: 'Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©',
        frequency: 621,
        distance: 450,
        signalStrength: 'strong',
        noisy: false,
        streamUrl: 'https://edge.taghtia.com/sa/12.m3u8'
      },
      cairo: {
        name: 'Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰',
        location: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©ØŒ Ù…ØµØ±',
        frequency: 1161,
        distance: 1200,
        signalStrength: 'weak',
        noisy: true,
        streamUrl: 'https://www.maspero.eg/stream/14'
      }
    };

    // ====== DOM ======
    const dialKnob = document.getElementById('dial-knob');
    const dialTrack = document.querySelector('.dial-track');

    const currentFrequencyDisplay = document.getElementById('current-frequency');
    const stationNameEl = document.getElementById('station-name');
    const locationEl = document.getElementById('broadcast-location');
    const freqEl = document.getElementById('frequency-display');
    const distEl = document.getElementById('distance-display');
    const noiseOverlay = document.getElementById('noise-overlay');

    const ledWeak = document.getElementById('led-weak');
    const ledMedium = document.getElementById('led-medium');
    const ledStrong = document.getElementById('led-strong');
    const signalStatus = document.getElementById('signal-status');

    const audioEl = document.getElementById('station-audio');
    const playBtn = document.getElementById('play-btn');
    const pauseBtn = document.getElementById('pause-btn');
    const vol = document.getElementById('vol');
    const audioState = document.getElementById('audio-state');

    audioEl.volume = Number(vol.value);

    // ====== State ======
    let currentFrequency = 540;
    let isDragging = false;
    let activeKey = null;

    // HLS instance
    let hls = null;

    // ØªØ´ÙˆÙŠØ´ ØµÙˆØªÙŠ (WebAudio) â€” ÙÙ‚Ø· Ù„Ù„Ù‚Ø§Ù‡Ø±Ø©ØŒ ÙˆÙ„Ù† ÙŠØ¹Ù…Ù„ Ø¥Ù„Ø§ Ø¥Ø°Ø§ Ø§Ø´ØªØºÙ„ ØµÙˆØª Ø§Ù„Ù…Ø­Ø·Ø©
    let audioCtx = null;
    let noiseNode = null;
    let noiseGain = null;

    function ensureNoiseEngine() {
      if (audioCtx) return;

      audioCtx = new (window.AudioContext || window.webkitAudioContext)();

      const bufferSize = 2 * audioCtx.sampleRate;
      const noiseBuffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      const output = noiseBuffer.getChannelData(0);
      for (let i = 0; i < bufferSize; i++) output[i] = Math.random() * 2 - 1;

      noiseNode = audioCtx.createBufferSource();
      noiseNode.buffer = noiseBuffer;
      noiseNode.loop = true;

      noiseGain = audioCtx.createGain();
      noiseGain.gain.value = 0; // Ø§ÙØªØ±Ø§Ø¶ÙŠ: ØµØ§Ù…Øª

      noiseNode.connect(noiseGain).connect(audioCtx.destination);
      noiseNode.start(0);
    }

    function destroyHls() {
      if (hls) { try { hls.destroy(); } catch(e) {} }
      hls = null;
    }

    function setSource(url) {
      destroyHls();

      const isM3U8 = /\.m3u8(\?|$)/i.test(url);

      if (isM3U8) {
        if (audioEl.canPlayType('application/vnd.apple.mpegurl')) {
          audioEl.src = url; // Safari
        } else if (window.Hls && window.Hls.isSupported()) {
          hls = new Hls({ lowLatencyMode: true });
          hls.loadSource(url);
          hls.attachMedia(audioEl);
        } else {
          audioEl.src = url;
        }
      } else {
        audioEl.src = url;
      }
    }

    function setNoiseVisual(isNoisy) {
      noiseOverlay.style.opacity = isNoisy ? '0.3' : '0';
      stationNameEl.className = isNoisy
        ? 'text-green-400 font-bold text-sm md:text-base static-text'
        : 'text-green-400 font-bold text-sm md:text-base';
    }

    function setNoiseAudio(isNoisy, audioIsPlaying) {
      if (!audioCtx || !noiseGain) return;
      // âœ… Ø§Ù„Ø±ÙŠØ§Ø¶ ØµØ§ÙÙŠ Ø¬Ø¯Ù‹Ø§: 0 Ø¯Ø§Ø¦Ù…Ù‹Ø§
      noiseGain.gain.value = (isNoisy && audioIsPlaying) ? 0.18 : 0;
    }

    async function playStation() {
      if (!activeKey) {
        audioState.textContent = 'Ø§Ø®ØªØ§Ø±ÙŠ Ù…Ø­Ø·Ø© Ø£ÙˆÙ„Ù‹Ø§';
        return;
      }

      const st = stations[activeKey];
      audioState.textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„...';

      ensureNoiseEngine();
      await audioCtx.resume().catch(()=>{});

      setSource(st.streamUrl);

      try {
        await audioEl.play();
        audioState.textContent = 'âœ… ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†';
        // ØªØ´ÙˆÙŠØ´ ØµÙˆØªÙŠ ÙÙ‚Ø· Ù„Ù„Ù‚Ø§Ù‡Ø±Ø©
        setNoiseAudio(st.noisy, true);
      } catch (e) {
        audioState.textContent = 'âŒ ÙØ´Ù„ Ø§Ù„ØªØ´ØºÙŠÙ„ (Ø§ÙØªØ­ÙŠ Ø§Ù„ØµÙØ­Ø© Ø¹Ø¨Ø± http:// ÙˆÙ„ÙŠØ³ file:// Ø£Ùˆ Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± Ù…Ø¨Ø§Ø´Ø±)';
        setNoiseAudio(st.noisy, false);
      }
    }

    function pauseStation() {
      try { audioEl.pause(); } catch(e) {}
      audioState.textContent = 'ØªÙ… Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù';
      const st = activeKey ? stations[activeKey] : null;
      setNoiseAudio(st?.noisy, false);
    }

    playBtn.addEventListener('click', playStation);
    pauseBtn.addEventListener('click', pauseStation);

    vol.addEventListener('input', () => {
      audioEl.volume = Number(vol.value);
    });

    audioEl.addEventListener('error', () => {
      audioState.textContent = 'âŒ ØªØ¹Ø°Ø± ØªØ´ØºÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØª Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø­Ø·Ø©';
      const st = activeKey ? stations[activeKey] : null;
      setNoiseAudio(st?.noisy, false);
    });

    // ====== UI Logic ======
    function updateSignalLeds(strength) {
      ledWeak.className = 'signal-led led-off';
      ledMedium.className = 'signal-led led-off';
      ledStrong.className = 'signal-led led-off';

      if (strength === 'weak') {
        ledWeak.className = 'signal-led led-red';
      } else if (strength === 'medium') {
        ledWeak.className = 'signal-led led-red';
        ledMedium.className = 'signal-led led-yellow';
      } else if (strength === 'strong') {
        ledWeak.className = 'signal-led led-red';
        ledMedium.className = 'signal-led led-yellow';
        ledStrong.className = 'signal-led led-green';
      }
    }

    function updateFrequencyDisplay() {
      const minFreq = 540;
      const maxFreq = 1600;
      const range = maxFreq - minFreq;
      const percentage = (currentFrequency - minFreq) / range * 100;

      dialKnob.style.left = `calc(${percentage}% - 16px)`;
      currentFrequencyDisplay.innerHTML = `${Math.round(currentFrequency)} <span class="text-2xl">KHz</span>`;

      const tolerance = 20;
      let st = null;
      let key = null;

      if (Math.abs(currentFrequency - stations.riyadh.frequency) < tolerance) {
        st = stations.riyadh; key = 'riyadh';
      } else if (Math.abs(currentFrequency - stations.cairo.frequency) < tolerance) {
        st = stations.cairo; key = 'cairo';
      }

      if (st) {
        activeKey = key;
        stationNameEl.textContent = st.name;
        locationEl.textContent = st.location;
        freqEl.textContent = `${st.frequency} KHz`;
        distEl.textContent = `${st.distance} Km`;

        setNoiseVisual(!!st.noisy); // âœ… ØªØ´ÙˆÙŠØ´ Ø¨ØµØ±ÙŠ Ù„Ù„Ù‚Ø§Ù‡Ø±Ø© ÙÙ‚Ø·
        ensureNoiseEngine();
        setNoiseAudio(!!st.noisy, !audioEl.paused); // âœ… ØªØ´ÙˆÙŠØ´ ØµÙˆØªÙŠ ÙÙ‚Ø· Ù„Ùˆ Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© + Ø§Ù„ØªØ´ØºÙŠÙ„ Ø´ØºØ§Ù„

        updateSignalLeds(st.signalStrength);
        if (st.signalStrength === 'strong') {
          signalStatus.textContent = 'âœ… Ø¥Ø´Ø§Ø±Ø© Ù‚ÙˆÙŠØ© ÙˆÙˆØ§Ø¶Ø­Ø©';
          signalStatus.className = 'text-center mt-3 text-green-400 font-bold';
        } else if (st.signalStrength === 'medium') {
          signalStatus.textContent = 'âš ï¸ Ø¥Ø´Ø§Ø±Ø© Ù…ØªÙˆØ³Ø·Ø©';
          signalStatus.className = 'text-center mt-3 text-yellow-400 font-bold';
        } else {
          signalStatus.textContent = 'ğŸ“¡ Ø¥Ø´Ø§Ø±Ø© Ø¶Ø¹ÙŠÙØ©';
          signalStatus.className = 'text-center mt-3 text-red-400 font-bold';
        }

      } else {
        activeKey = null;
        stationNameEl.textContent = '---';
        locationEl.textContent = '---';
        freqEl.textContent = '--- KHz';
        distEl.textContent = '--- Km';

        setNoiseVisual(false);
        ensureNoiseEngine();
        setNoiseAudio(false, false);

        updateSignalLeds('none');
        signalStatus.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø§Ø±Ø©';
        signalStatus.className = 'text-center mt-3 text-amber-100 font-bold';
      }
    }

    // Dial drag
    function handleDrag(e) {
      if (!isDragging) return;

      const rect = dialTrack.getBoundingClientRect();
      const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
      let x = clientX - rect.left;
      x = Math.max(0, Math.min(x, rect.width));

      const percentage = x / rect.width;
      currentFrequency = 540 + percentage * (1600 - 540);
      updateFrequencyDisplay();
    }

    dialKnob.addEventListener('mousedown', () => isDragging = true);
    dialKnob.addEventListener('touchstart', () => isDragging = true);
    document.addEventListener('mousemove', handleDrag);
    document.addEventListener('touchmove', handleDrag);
    document.addEventListener('mouseup', () => isDragging = false);
    document.addEventListener('touchend', () => isDragging = false);

    dialTrack.addEventListener('click', (e) => {
      const rect = dialTrack.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const percentage = x / rect.width;
      currentFrequency = 540 + percentage * (1600 - 540);
      updateFrequencyDisplay();
    });

    // init
    updateFrequencyDisplay();
  </script>
</body>
</html>
